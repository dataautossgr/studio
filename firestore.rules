/**
 * @file Firestore Security Rules
 * @core_philosophy This ruleset is generated in "prototyping mode" to allow for rapid iteration.
 *   It assumes zero authentication and authorization for simplicity. All data is essentially public.
 *   However, path-based access patterns are still enforced in case authorization needs to be added later.
 * @data_structure The Firestore database is structured with top-level collections for each entity:
 *   /products/{productId}, /sales/{saleId}, /sale_items/{saleItemId}, /dealers/{dealerId},
 *   /purchases/{purchaseId}, /customers/{customerId}, /cash_sessions/{cashSessionId},
 *   /bank_transactions/{bankTransactionId}, /settings/{settingId}, /payments/{paymentId},
 *   /repair_jobs/{jobId}, /repair_job_items/{jobItemId}, and /expenses/{expenseId}.
 * @key_security_decisions Authentication is disabled for the moment, so all read and write access
 *   is generally allowed. However, in the interest of forward compatibility, we are explicitly defining
 *   rules for each operation (get, list, create, update, delete) on each collection.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows read and write access to products.
     * @path /products/{productId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /products/{productId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to sales.
     * @path /sales/{saleId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /sales/{saleId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to sale items.
     * @path /sale_items/{saleItemId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /sale_items/{saleItemId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to dealers.
     * @path /dealers/{dealerId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /dealers/{dealerId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to purchases.
     * @path /purchases/{purchaseId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /purchases/{purchaseId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to customers.
     * @path /customers/{customerId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /customers/{customerId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to cash sessions.
     * @path /cash_sessions/{cashSessionId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /cash_sessions/{cashSessionId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to bank transactions.
     * @path /bank_transactions/{bankTransactionId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /bank_transactions/{bankTransactionId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to settings.
     * @path /settings/{settingId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /settings/{settingId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to payments.
     * @path /payments/{paymentId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /payments/{paymentId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to dealer payments.
     * @path /dealer_payments/{paymentId}
     * @allow (get, list, create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /dealer_payments/{paymentId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to repair jobs.
     * @path /repair_jobs/{jobId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /repair_jobs/{jobId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to repair job items.
     * @path /repair_job_items/{jobItemId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /repair_job_items/{jobItemId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to expenses.
     * @path /expenses/{expenseId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /expenses/{expenseId} {
      allow get: if true;
      allow list: if true;
      allow create: if true;
      allow update: if true;
      allow delete: if true;
    }

    /**
     * @description Allows read and write access to batteries.
     * @path /batteries/{batteryId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /batteries/{batteryId} {
      allow get, list, create, update, delete: if true;
    }

    /**
     * @description Allows read and write access to scrap stock.
     * @path /scrap_stock/{stockId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /scrap_stock/{stockId} {
      allow get, list, create, update, delete: if true;
    }

    /**
     * @description Allows read and write access to battery sales.
     * @path /battery_sales/{saleId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /battery_sales/{saleId} {
      allow get, list, create, update, delete: if true;
    }

    /**
     * @description Allows read and write access to battery purchases.
     * @path /battery_purchases/{purchaseId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /battery_purchases/{purchaseId} {
      allow get, list, create, update, delete: if true;
    }

     /**
     * @description Allows read and write access to scrap purchases.
     * @path /scrap_purchases/{scrapPurchaseId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /scrap_purchases/{scrapPurchaseId} {
      allow get, list, create, update, delete: if true;
    }

     /**
     * @description Allows read and write access to scrap sales.
     * @path /scrap_sales/{saleId}
     * @allow (get, list) if true;
     * @allow (create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /scrap_sales/{saleId} {
      allow get, list, create, update, delete: if true;
    }

    /**
     * @description Allows read and write access to acid stock.
     * @path /acid_stock/{stockId}
     * @allow (get, list, create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /acid_stock/{stockId} {
      allow get, list, create, update, delete: if true;
    }

    /**
     * @description Allows read and write access to acid purchases.
     * @path /acid_purchases/{purchaseId}
     * @allow (get, list, create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /acid_purchases/{purchaseId} {
      allow get, list, create, update, delete: if true;
    }
    
    /**
     * @description Allows read and write access to acid consumption.
     * @path /acid_consumption/{consumptionId}
     * @allow (get, list, create, update, delete) if true;
     * @principle Public read and write access.
     */
    match /acid_consumption/{consumptionId} {
      allow get, list, create, update, delete: if true;
    }
  }
}
    